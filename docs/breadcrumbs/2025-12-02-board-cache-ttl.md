# Breadcrumb
- **Task asked:** Board caching TTL & stale-data safeguards (Asana `1212222524284749`)
- **Plan:** Add a lightweight object-cache layer for board payload/stage/view lookups with filterable TTLs, auto-bust caches on visit CRUD + admin/REST updates, update docs with tuning notes, then rebuild/install the ZIP and run QA (phpcs + admin happy-path + board refresh after REST patch).
- **Files changed:** `plugin/bb-groomflow/includes/data/class-visit-service.php`, `plugin/bb-groomflow/includes/api/class-*-controller.php` (clients/guardians/services/packages/flags/views), `plugin/bb-groomflow/includes/admin/class-*-admin.php` (clients/guardians/services/packages/flags/views/stages/settings), `TECH_READINESS.md`, `docs/NOTES.md`, `docs/DEBT.md`, `qa/QA_LOG.md`, `docs/REFACTOR_LOG.md`
- **Commands executed:** `git checkout -b refactor/board-caching-ttl`; `bash scripts/build_plugin_zip.sh`; `cd docker && docker compose up -d`; `docker compose cp ../build/bb-groomflow-0.1.0-dev.zip wordpress:/var/www/html/bb-groomflow.zip`; `docker compose run --rm -T wpcli wp plugin install /var/www/html/bb-groomflow.zip --force --activate`; `docker compose run --rm -T wpcli wp bbgf visits seed-demo --count=8 --force`; `qa-phpcbf plugin/bb-groomflow/includes/data/class-visit-service.php`; `qa-phpcs plugin/bb-groomflow`; Manual admin happy-path via WP-CLI updates; board cache eval (`docker compose run --rm -T wpcli wp eval ... PATCH/GET board`).
- **Tests & results:** `qa-phpcs plugin/bb-groomflow` → `/opt/qa/artifacts/phpcs-1764702851.txt` (PASS); Manual admin happy-path (WP-CLI Clients→Settings) → `/opt/qa/artifacts/manual-admin-happy-path-20251202T191431.txt` (PASS); Board cache REST patch + refetch (`wp eval …`) → `/opt/qa/artifacts/board-cache-20251202T191544.txt` (PASS; last_updated bumps + patched note seen).
- **Tips & Tricks:** New cache knobs: `bbgf_board_payload_cache_ttl` (default 5s) and `bbgf_board_metadata_cache_ttl` / `bbgf_board_views_cache_ttl` (default 120s). Caches auto-flush after visit CRUD plus client/guardian/service/package/flag/view/stage/settings changes in admin + REST; manual reset via `wp eval 'bbgf()->visit_service()->flush_cache();'`. First board-cache artifact (`...191518.txt`) contains an intentional quoting error—use the `...191544.txt` run instead.
- **Remaining work:** Await PM review on Asana `1212222524284749`; monitor cache impact once merged (consider UI toggle for TTLs if product wants admin control).
