# Breadcrumb
- **Task asked:** Deliver a full notifications admin experience with editable templates and stage triggers that non-technical staff can manage.
- **Plan:** 1) Expand the schema for notifications + triggers. 2) Add intuitive WP_List_Table-based screens for templates and stage mappings with proper sanitization. 3) Wire them into the plugin bootstrap, ensure PHPCS/WordPress compliance, and smoke-test via WP-CLI.
- **Files changed:** plugin/bb-groomflow/bb-groomflow.php; plugin/bb-groomflow/includes/database/class-schema.php; plugin/bb-groomflow/includes/class-plugin.php; plugin/bb-groomflow/includes/api/class-visits-controller.php; plugin/bb-groomflow/includes/notifications/class-notifications-service.php; plugin/bb-groomflow/includes/admin/class-notifications-admin.php; plugin/bb-groomflow/includes/admin/class-notifications-list-table.php; plugin/bb-groomflow/includes/admin/views/notifications-page.php; plugin/bb-groomflow/includes/admin/class-notification-triggers-admin.php; plugin/bb-groomflow/includes/admin/class-notification-triggers-list-table.php; plugin/bb-groomflow/includes/admin/views/notification-triggers-page.php; docs/ARCHITECTURE.md; CHANGELOG.md; docs/API.md; docs/breadcrumbs/2025-10-29-notifications-admin.md.
- **Commands executed:** `qa-phpcs plugin/bb-groomflow`; repeated `qa-phpcbf …`; `bash scripts/build_plugin_zip.sh`; `docker compose run --rm -T wpcli wp plugin install /var/www/html/bb-groomflow-0.1.0-dev.zip --force --activate`; `docker compose run --rm -T wpcli wp db query ...` (verify new tables, seed sample notification/trigger, clean up). `docker compose run --rm -T wpcli wp eval` to confirm `bbgf_notification_stage_queued` payload after a stage move.
- **Tests & results:** PHPCS clean (`/opt/qa/artifacts/phpcs-1761757147.txt`). Stage move smoke test queued the expected trigger payload when a mapping exists and respected the enable flag. Manual DB checks confirmed new tables created via upgrade.
- **Tips & Tricks:** The admin forms reuse core `wp_editor`—if HTML isn’t needed, switch the editor to “Text” mode before saving. Stage trigger dropdowns populate directly from `bb_stages`; sync the stage list first to avoid missing options.
- **Remaining work:** Notification delivery (template rendering + email send queue) still needs implementation, as do richer trigger conditions and audit history in later sprints.
