# Breadcrumb
- **Task asked:** Stand up Sprint 2 notification scaffolding so stage moves can queue future emails without blocking current UX.
- **Plan:** 1) Review notification settings/requirements. 2) Add a notifications service + new hooks from the visit move flow, ensuring settings/trigger tables are honoured. 3) Update docs/CHANGELOG, run PHPCS, rebuild/install ZIP, and smoke-test via WP-CLI.
- **Files changed:** plugin/bb-groomflow/includes/class-plugin.php; plugin/bb-groomflow/includes/notifications/class-notifications-service.php; plugin/bb-groomflow/includes/api/class-visits-controller.php; docs/ARCHITECTURE.md; CHANGELOG.md; docs/breadcrumbs/2025-10-29-notifications-scaffolding.md.
- **Commands executed:** `qa-phpcs plugin/bb-groomflow`; `qa-phpcbf plugin/bb-groomflow/includes/notifications/class-notifications-service.php`; `bash scripts/build_plugin_zip.sh`; `docker compose cp ../build/bb-groomflow-0.1.0-dev.zip wordpress:/var/www/html/bb-groomflow-0.1.0-dev.zip`; `docker compose run --rm -T wpcli wp plugin install /var/www/html/bb-groomflow-0.1.0-dev.zip --force --activate`; WP-CLI eval script to create/move a visit (verifying `bbgf_visit_stage_changed` fires without errors); follow-up SQL cleanup for the temporary visit/history rows.
- **Tests & results:** PHPCS clean (`/opt/qa/artifacts/phpcs-1761754418.txt`). Stage move smoke test confirmed the hook fires cleanly (no notifications queued because no triggers exist yet), and cleanup restored the QA database state.
- **Tips & Tricks:** Need to watch the queue? Hook `bbgf_notification_stage_queued` temporarily in WP-CLI (`wp eval 'add_action(...);'`) to inspect payloads without editing plugin code.
- **Remaining work:** Wire `/stats/service-mix` and expand notification delivery logic (template rendering + email send) once Sprint 5 lands.
