# Breadcrumb
- **Task asked:** Investigate the Docker fatal on Notification Activity and get the plugin running again.
- **Plan:** Reproduce the failure via Docker logs → patch the notification logs list table to accept the core `wpdb` instance and expose the resend handler → rebuild/install the ZIP in Docker → run PHPCS + WP-CLI smoke of `Notification_Logs_List_Table` → record next steps.
- **Files changed:** plugin/bb-groomflow/includes/admin/class-notification-logs-list-table.php; plugin/bb-groomflow/includes/admin/class-notification-logs-admin.php; plugin/bb-groomflow/includes/admin/class-notifications-admin.php; plugin/bb-groomflow/includes/api/class-visits-controller.php; docs/API.md; QA_TOOLBELT.md
- **Commands executed:** `qa-phpcs plugin/bb-groomflow` (multiple times); `bash scripts/build_plugin_zip.sh` (multiple times); `docker cp ../build/bb-groomflow-0.1.0-dev.zip groomflow-wordpress-1:/var/www/html/bb-groomflow-0.1.0-dev.zip`; `docker compose run --rm -T wpcli wp plugin install /var/www/html/bb-groomflow-0.1.0-dev.zip --force --activate` (multiple times); `docker compose run --rm -T --user=root wpcli bash -lc 'rm -f /var/www/html/bb-groomflow-0.1.0-dev.zip'` (multiple times); `docker compose run --rm -T wpcli wp eval "require_once ABSPATH . 'wp-admin/includes/admin.php'; $table = new BBGF\Admin\Notification_Logs_List_Table( bbgf(), array() ); $table->prepare_items(); echo 'ok';"`; `docker compose run --rm -T wpcli wp eval "wp_set_current_user( 1 ); \$request = new WP_REST_Request( 'GET', '/bb-groomflow/v1/board' ); \$response = rest_do_request( \$request ); echo 'stages:' . count( \$response->get_data()['stages'] ?? array() );"`; `docker compose run --rm -T wpcli wp eval "wp_set_current_user(1); \$request = new WP_REST_Request('POST','/bb-groomflow/v1/visits/1/photo'); \$response = rest_do_request( \$request ); var_export( array( 'status' => \$response->get_status(), 'data' => \$response->get_data() ) );"`
- **Tests & results:** PHPCS returns only pre-existing warnings (schema-change + alignment). WP-CLI eval of `Notification_Logs_List_Table->prepare_items()` now completes (`ok`) confirming the fatal is resolved. WordPress logs no longer show the TypeError, and hitting `/wp-admin/` now 302-redirects without critical failure. Board REST requests now respond successfully with the new `photos` field (empty array in current seed data). Photo endpoint returns a structured 404 for missing visits, confirming validation.
- **Tips & Tricks:** When installing ZIPs into the Docker WP volume, copy the file into `/var/www/html/` (shared volume) before running `wp plugin install`; `/tmp` is container-specific and `wpcli` cannot read it. Linking an existing media item to a visit just requires passing `attachment_id` to `/bb-groomflow/v1/visits/{id}/photo`; the endpoint checks for conflicts before reassigning.
- **Remaining work:** Manual QA pass in wp-admin → Notifications (verify merge-tag copy, uploads via the new endpoint, CSV export, resend flow) and capture screenshots/artifacts; follow with a full Sprint 2 regression of intake → stage moves → public board masking once photo uploads are confirmed in the browser.
