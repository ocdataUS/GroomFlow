# Breadcrumb
- **Task asked:** Add an intuitive “check-in” flow to the board: searchable/addable guardian + client in one modal, create visit, refresh board; fix main-photo fatal and ensure board refresh on photo changes.
- **Plan:** Wire REST + intake search endpoint, build intake modal UI (toolbar add button → guardian/client/visit form), reuse visit create API, ensure board refresh after photo + intake actions, and add headless smoke coverage.
- **Files changed:** `plugin/bb-groomflow/includes/api/class-visits-controller.php`, `plugin/bb-groomflow/includes/bootstrap/class-assets-service.php`, `plugin/bb-groomflow/includes/data/class-visit-service.php`, `plugin/bb-groomflow/assets/src/index.js`, `plugin/bb-groomflow/assets/src/style.scss`, `scripts/test_intake_modal.js`, built assets/ZIP.
- **Commands executed:** `npm run build`; `bash scripts/build_plugin_zip.sh`; `cd docker && docker compose cp ../build/bb-groomflow-0.1.0-dev.zip wordpress:/var/www/html/bb-groomflow.zip`; `docker compose run --rm -T wpcli wp plugin install /var/www/html/bb-groomflow.zip --force --activate`; `node scripts/test_intake_modal.js` (tee to artifact); `qa-phpcs plugin/bb-groomflow`.
- **Tests & results:** `qa-phpcs plugin/bb-groomflow` → `/opt/qa/artifacts/phpcs-1766695233.txt` (clean); Intake modal headless smoke (fills guardian/client, submits, waits for card) → `/opt/qa/artifacts/intake-modal-smoke-20251225T203704Z.txt` (PASS).
- **Tips & Tricks:** New intake modal button lives beside refresh/fullscreen; modal search hits `/visits/intake-search` and you can clear selection with the “×” chip; test via `node scripts/test_intake_modal.js` (env overrides: `BBGF_BASE_URL`, `BBGF_ADMIN_USER`, `BBGF_ADMIN_PASS`).
- **Remaining work:** Optional visual polish after PM feedback; run a browser pass to validate styling and service/flag additions if needed; update Asana/PM with demo clip once reviewed.
