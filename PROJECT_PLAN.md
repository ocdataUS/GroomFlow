# PROJECT_PLAN — GroomFlow Refactor Backlog

Each slice is standalone. Claim one, log it in `docs/REFACTOR_LOG.md`, and keep this list updated.

| Slice | Description & Target Files | QA Expectations | Status |
| --- | --- | --- | --- |
| **S1 · PHPCS & Coding Standards Remediation** | Clean up WordPress Coding Standards violations (custom capability annotations, schema-change comments, indentation, short ternaries) across `plugin/bb-groomflow/includes/class-plugin.php`, `includes/cli/class-visits-command.php`, `includes/data/class-visit-service.php`, `includes/notifications/class-notifications-service.php`. Ensure PHPCS runs clean without blanket ignores. | `qa-phpcs plugin/bb-groomflow`; manual admin dashboard smoke to ensure no regressions. | Completed |
| **S2 · Uninstall & Data Cleanup** | Implement real uninstall logic in `plugin/bb-groomflow/uninstall.php` (drop custom tables, delete `bbgf_*` options, with safeguards). Add user-facing setting/constant if needed. Update docs. | Install plugin → create sample data → uninstall via wp-admin + `wp plugin uninstall bb-groomflow --deactivate --uninstall`; verify tables/options removed. | Completed |
| **S3 · Plugin Bootstrap Modularization** | Break `includes/class-plugin.php` into smaller services (assets, admin menu, REST, CLI) to reduce ignores and improve testability. Update autoload/bootstrap wiring. | Full rebuild/install; run manual admin happy-path + board view load; `qa-phpcs`. | Completed |
| **S4 · CLI & Seed Data Hardening** | Update `includes/cli/class-visits-command.php` + related helpers to use `wp_rand()`, proper timestamps, prepared statements, and better error reporting. Document commands in `docs/workflow.md`. | `qa-phpcs`; run `docker compose run --rm -T wpcli wp bbgf visits seed-demo --count=4 --force`; verify visits populated. | Completed |
| **S5 · Documentation & QA Enforcement** | After code refactors, ensure README, SPEC, TECH_READINESS, QA_TOOLBELT stay current; add any missing Playwright/manual guidance. | `qa-phpcs` for docs (spellcheck optional); manual verification that docs reflect latest flow. | Completed |
| **S6 · Board Localization & Placeholder Accessibility** | Enhance `plugin/bb-groomflow/includes/bootstrap/class-assets-service.php` so the board bundle loads translation files, exposes filters for localized payloads/placeholder data, and ships more descriptive placeholder markup (ARIA labels, timer narration, readable chips). | `qa-phpcs plugin/bb-groomflow`; manual admin happy-path (Clients→Settings) after rebuilding/installing the ZIP. | Completed |
| **S7 · Board Polling & REST Wiring** | Convert the placeholder board into a live surface: hook `plugin/bb-groomflow/assets/src/index.js` into the REST endpoints (`includes/api/class-visits-controller.php`, `includes/data/class-visit-service.php`), honor `modified_after` polling, expose stage move actions (REST `POST /visits/{id}/move`), and ensure the new assets are localized via `class-assets-service.php`. Keep shortcode/admin/Elementor wrappers intact. | `qa-phpcs plugin/bb-groomflow`; manual browser verification of the board (internal + lobby) covering refresh, stage move, and timer updates; `docker compose run wpcli wp bbgf visits seed-demo --count=8 --force` before testing. | Completed |

Add new slices or change statuses as work progresses. Every slice must list explicit QA so the next agent knows how to verify.
